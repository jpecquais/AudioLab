import("stdfaust.lib");

f = hslider("Freq[scale:log]",440,20,20000,1);

sqr_coef = 0, 6.36619772e-01, 0, 2.12206591e-01, 0, 1.27323954e-01, 0, 9.09456817e-02, 0, 7.07355301e-02, 0, 5.78745246e-02, 0, 4.89707515e-02, 0, 4.24413179e-02, 0, 3.74482217e-02, 0, 3.35063035e-02, 0, 3.03152270e-02, 0, 2.76791202e-02, 0, 2.54647905e-02, 0, 2.35785097e-02, 0, 2.19524055e-02, 0, 2.05361212e-02, 0, 1.92915078e-02, 0, 1.81891359e-02, 0, 1.72059393e-02, 0, 1.63235834e-02;

saw_coef = 0, 3.18309886e-01, 1.59154943e-01, 1.06103295e-01, 7.95774716e-02, 6.36619773e-02, 5.30516477e-02, 4.54728409e-02, 3.97887358e-02, 3.53677652e-02, 3.18309887e-02, 2.89372624e-02, 2.65258239e-02, 2.44853759e-02, 2.27364205e-02, 2.12206591e-02, 1.98943679e-02, 1.87241110e-02, 1.76838826e-02, 1.67531520e-02, 1.59154944e-02, 1.51576137e-02, 1.44686313e-02, 1.38395604e-02, 1.32629120e-02, 1.27323955e-02, 1.22426880e-02, 1.17892551e-02, 1.13682103e-02, 1.09762031e-02, 1.06103296e-02, 1.02680610e-02, 9.94718406e-03, 9.64575424e-03, 9.36205560e-03, 9.09456830e-03, 8.84194141e-03, 8.60297003e-03, 8.37657609e-03, 8.16179209e-03;

triangle_coef = 0, 4.05284735e-01, 0, 4.50316372e-02, 0, 1.62113894e-02, 0, 8.27111704e-03, 0, 5.00351525e-03, 0, 3.34946063e-03, 0, 2.39813453e-03, 0, 1.80126550e-03, 0, 1.40236933e-03, 0, 1.12267240e-03, 0, 9.19013013e-04, 0, 7.66133723e-04, 0, 6.48455584e-04, 0, 5.55946147e-04, 0, 4.81908136e-04, 0, 4.21732303e-04, 0, 3.72162300e-04, 0, 3.30844690e-04, 0, 2.96044373e-04, 0, 2.66459401e-04;

osc_row = par(i,40,os.osc(i*f)*(i*f<(ma.SR/2)));

process = osc_row : par(i,40,*(ba.selector(i,40,saw_coef))):> *(0.5);